<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>주간퀘스트</title>

<style>
  body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', Arial, sans-serif;
    margin: 16px;
    line-height: 1.4;
  }
  h1 {
    font-size: 22px;
    margin: 0 0 12px 0;
    text-align: center;
  }
  .controls {
    margin-bottom: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
  }
  .progress {
    font-size: 16px;
    font-weight: bold;
  }
  button {
    padding: 10px 16px;
    border-radius: 8px;
    border: 1px solid #ccc;
    background: #f6f6f6;
    cursor: pointer;
    font-size: 14px;
  }
  button:hover {
    background: #e6e6e6;
  }
  section {
    margin-bottom: 36px;
  }
  .table-container {
    overflow-x: auto; /* 모바일에서 가로 스크롤 */
    -webkit-overflow-scrolling: touch;
    border: 1px solid #ddd;
    border-radius: 8px;
  }
  table {
    border-collapse: collapse;
    width: 100%;
    min-width: 600px; /* 표가 너무 좁아지지 않도록 */
  }
  th, td {
    border: 1px solid #ddd;
    padding: 6px 8px;
    vertical-align: top;
    text-align: center;
    font-size: 14px;
    white-space: nowrap;
  }
  th {
    background: #fafafa;
    position: sticky;
    top: 0;
    z-index: 2;
  }
  input[type=checkbox] {
    transform: scale(1.3);
    cursor: pointer;
  }
</style>

<script>
function saveCheckboxes() {
  const states = [];
  document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
    states.push(cb.checked);
  });
  localStorage.setItem('checkboxStates', JSON.stringify(states));
  updateProgress();
}

function loadCheckboxes() {
  const saved = JSON.parse(localStorage.getItem('checkboxStates') || '[]');
  document.querySelectorAll('input[type="checkbox"]').forEach((cb, i) => {
    cb.checked = saved[i] || false;
  });
  updateProgress();
}

function uncheckAll() {
  document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
  saveCheckboxes();
}

function updateProgress() {
  const checkboxes = document.querySelectorAll('input[type="checkbox"]');
  const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
  const total = checkboxes.length;
  const percent = total ? Math.round((checked / total) * 100) : 0;
  document.getElementById('progress').textContent = `진행률: ${checked}/${total} (${percent}%)`;
}

window.addEventListener('DOMContentLoaded', () => {
  loadCheckboxes();
  document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
    cb.addEventListener('change', saveCheckboxes);
  });
});
</script>
</head>
<body>
<h1>주간퀘스트</h1>

<div class="controls">
  <span class="progress" id="progress">진행률: 0/0 (0%)</span>
  <button onclick="uncheckAll()">✅ 전체 체크 해제</button>
</div>

<section id="Sheet1">
  <div class="table-container">
    <table class="dataframe">
      <thead>
        <tr>
          <td></td>
          <td>암습(카타)</td>
          <td>깝질(이노)</td>
          <td>윱(데메)</td>
          <td>머플랭(데메)</td>
          <td>김볶밥(데메)</td>
          <td>김치찜(데메)</td>
          <td>뽁(오마)</td>
          <td>잇치(매패)</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>사원 10판</td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
        </tr>
        <tr>
          <td>심연</td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
        </tr>
        <tr>
          <td>서펜티움</td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td>x</td>
          <td>x</td>
          <td>x</td>
          <td>x</td>
          <td>x</td>
        </tr>
        <tr>
          <td>둠 아포리아</td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td><input type="checkbox"></td>
          <td>x</td>
          <td>x</td>
          <td>x</td>
          <td>x</td>
          <td>x</td>
        </tr>
        <tr>
          <td>[도전모드]로쏘/베르드</td>
          <td><input type="checkbox"></td>
          <td>x</td>
          <td><input type="checkbox"></td>
          <td>x</td>
          <td>x</td>
          <td>x</td>
          <td>x</td>
          <td>x</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

</body>
</html>
